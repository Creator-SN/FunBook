(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63606207"],{"19e0":function(t,e,a){},"61c2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings-container",class:[{dark:"dark"===t.theme}]},[a("div",{staticClass:"s-row"},[a("p",{staticClass:"s-title"},[t._v(t._s(t.local("Setting")))])]),a("div",{staticClass:"scroll-view"},[a("div",{staticClass:"s-item-block"},[a("fv-button",{directives:[{name:"show",rawName:"v-show",value:!t.userInfo,expression:"!userInfo"}],staticStyle:{width:"150px"},attrs:{theme:"dark","is-box-shadow":!0,background:"rgba(0, 90, 158, 1)"},on:{click:t.login}},[t._v(t._s(t.local("Login")))])],1),a("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"35px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"StorageTape",title:t.local("Source"),content:t.local("Add New Source")},scopedSlots:t._u([{key:"extension",fn:function(){return[a("fv-button",{staticStyle:{width:"120px"},attrs:{theme:t.theme,icon:"OneDriveAdd","is-box-shadow":!0},on:{click:function(e){t.show.addDS=!0}}},[t._v(t._s(t.local("Add")))])]},proxy:!0}])}),a("div",{staticClass:"s-item-block"},[a("fv-list-view",{staticStyle:{width:"100%",height:"auto","margin-top":"15px"},attrs:{value:t.thisDBList,theme:t.theme},on:{chooseItem:function(e){return t.switchDSDB(e)}},scopedSlots:t._u([{key:"listItem",fn:function(e){return[a("div",{staticClass:"list-view-item",class:[{choosen:t.data_index===e.index,disabled:t.SourceIndexDisabled(e.index)}]},[a("img",{staticClass:"icon-img",attrs:{draggable:"false",src:t.img.OneDrive,alt:""}}),a("p",{staticClass:"item-name"},[t._v(t._s(e.item.name))]),a("fv-button",{staticClass:"control-btn",attrs:{theme:t.theme,title:t.local("Unlink this source")},on:{click:function(a){return t.removeDS(e.item)}}},[a("i",{staticClass:"ms-Icon ms-Icon--RemoveLink"})])],1)]}}])})],1),a("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"15px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"Color",title:t.local("Theme"),content:"light"===t.theme?""+t.local("Light"):""+t.local("Dark")},scopedSlots:t._u([{key:"extension",fn:function(){return[a("fv-button",{staticStyle:{width:"40px",height:"40px"},attrs:{theme:t.theme,fontSize:"16",borderRadius:"50","is-box-shadow":!0,title:"light"===t.theme?""+t.local("Switch to the dark theme"):""+t.local("Switch to the light theme")},on:{click:function(e){return t.toggleTheme(t.v)}}},[a("i",{staticClass:"ms-Icon",class:["ms-Icon--"+("light"===t.theme?"Sunny":"ClearNight")]})])]},proxy:!0}])}),a("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"3px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"LocaleLanguage",title:t.local("Language"),content:t.local("Choose A Language")},scopedSlots:t._u([{key:"extension",fn:function(){return[a("fv-Combobox",{staticStyle:{width:"120px"},attrs:{theme:t.theme,options:t.languages,placeholder:t.local("Choose A Language"),background:"dark"===t.theme?"rgba(36, 36, 36, 1)":""},on:{"choose-item":t.chooseLanguage},model:{value:t.cur_language,callback:function(e){t.cur_language=e},expression:"cur_language"}})]},proxy:!0}])}),a("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"3px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"PowerButton",title:t.local("Logout"),content:t.local("Logout")},scopedSlots:t._u([{key:"extension",fn:function(){return[a("fv-button",{staticStyle:{width:"120px"},attrs:{theme:"dark","is-box-shadow":!0,background:"rgba(224, 130, 128, 1)"},on:{click:t.logout}},[t._v(t._s(t.local("Logout")))])]},proxy:!0}])})],1),a("add-ds",{attrs:{show:t.show.addDS,theme:t.theme},on:{"update:show":function(e){return t.$set(t.show,"addDS",e)}}})],1)},i=[],o=a("1da1"),r=a("5530"),s=(a("96cf"),a("d3b7"),a("159b"),a("7db0"),a("a434"),a("2f62")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("float-window-base",{attrs:{title:t.local("Init New Data Source"),theme:t.theme},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"w-p-block",staticStyle:{height:"100%"}},[a("p",{staticClass:"w-title"},[t._v(t._s(t.local("Data Source Name")))]),a("fv-Breadcrumb",{staticStyle:{width:"100%",height:"30px","margin-top":"15px"},attrs:{theme:t.theme,readOnly:!1},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDS.apply(null,arguments)}},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.lock.loading,expression:"lock.loading"}],staticClass:"tree-view-window"},[a("fv-TreeView",{staticStyle:{width:"100%",height:"100%",overflow:"auto"},attrs:{theme:t.theme,expandedIconPosition:"right",background:"dark"==t.theme?"rgba(45, 45, 45, 1)":"rgba(255, 255, 255, 1)","view-style":{backgroundColor:"dark"==t.theme?"rgba(45, 45, 45, 1)":"rgba(255, 255, 255, 1)",backgroundColorHover:"dark"==t.theme?"rgba(200, 200, 200, 0.1)":"rgba(255, 255, 255, 1)"}},on:{click:t.expandItem},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tree-view-custom-item"},[e.item.loading?a("fv-progress-ring",{staticStyle:{display:"flex","align-item":"center"},attrs:{loading:"true",r:"10",borderWidth:"2",background:"rgba(200, 200, 200, 0.1)"}}):a("img",{staticClass:"icon-img",attrs:{draggable:"false",src:e.item.icon,alt:""}}),a("p",{staticClass:"tree-view-custom-label"},[t._v(t._s(e.item.name))])],1)]}}]),model:{value:t.treeList,callback:function(e){t.treeList=e},expression:"treeList"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.lock.loading,expression:"!lock.loading"}],staticClass:"loading-block"},[a("fv-img",{staticStyle:{width:"90px",height:"auto",margin:"15px"},attrs:{draggable:"false",src:t.img.OneDrive}}),a("fv-progress-ring",{attrs:{loading:"true",r:"15",borderWidth:"3",background:"rgba(200, 200, 200, 0.1)"}})],1)],1)]},proxy:!0},{key:"control",fn:function(){return[a("fv-button",{attrs:{theme:"dark",background:"rgba(0, 153, 204, 1)",disabled:""===t.path},on:{click:t.addDS}},[t._v(t._s(t.local("Confirm")))]),a("fv-button",{attrs:{theme:t.theme},on:{click:function(e){t.thisShow=!1}}},[t._v(t._s(t.local("Cancel")))])]},proxy:!0}]),model:{value:t.thisShow,callback:function(e){t.thisShow=e},expression:"thisShow"}})},l=[],u=(a("b0c0"),a("4c9f")),h=a("320d"),d=a.n(h),g=a("0a83"),f=a.n(g),m=a("4563"),p=a.n(m),v={components:{floatWindowBase:u["a"]},props:{show:{default:!1}},data:function(){return{thisShow:this.show,path:"",treeList:[],img:{OneDrive:d.a,folder:f.a,file:p.a},lock:{loading:!0}}},watch:{show:function(t){this.thisShow=t},thisShow:function(t){this.$emit("update:show",t),this.path="",t&&(this.lock.loading=!0,this.getRootInfo())}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["d"])({onedrive:function(t){return t.onedrive},data_path:function(t){return t.data_path},language:function(t){return t.language},dbList:function(t){return t.dbList},theme:function(t){return t.theme}})),Object(s["b"])(["local"])),{},{v:function(){return this}}),methods:Object(r["a"])(Object(r["a"])({},Object(s["c"])({reviseConfig:"reviseConfig"})),{},{addDS:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.path){e.next=2;break}return e.abrupt("return");case 2:return t.data_path.push(t.path),e.next=5,t.reviseConfig({v:t,data_path:t.data_path});case 5:t.$emit("finished"),t.thisShow=!1;case 7:case"end":return e.stop()}}),e)})))()},getRootInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.lock.loading){e.next=2;break}return e.abrupt("return");case 2:return t.lock.loading=!1,e.next=5,t.onedrive.getMyDriveRootChildren();case 5:a=e.sent,a.value&&(n=t.onedriveChildrenFormat(a.value),t.treeList=n),t.lock.loading=!0;case 8:case"end":return e.stop()}}),e)})))()},onedriveChildrenFormat:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;return n.forEach((function(t,i){t.folder?(n[i].icon=e.img.folder,n[i].children=[]):n[i].icon=e.img.file,n[i].loading=!1,n[i].finished=!1,n[i].depth=a?a.depth+1:1,n[i].parent=a,n[i].path=a?a.path+"/"+n[i].name:n[i].name})),n},expandItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.path=t.path,t.folder){a.next=3;break}return a.abrupt("return");case 3:if(!t.finished){a.next=5;break}return a.abrupt("return");case 5:return t.loading=!0,a.next=8,e.onedrive.getMyDriveItemChildren(t.id);case 8:n=a.sent,n.value&&(t.children=e.onedriveChildrenFormat(n.value,t)),t.finished=!0,t.loading=!1;case 12:case"end":return a.stop()}}),a)})))()}})},b=v,w=(a("b53b"),a("2877")),x=Object(w["a"])(b,c,l,!1,null,null,null),k=x.exports,S={components:{addDs:k},data:function(){return{cur_language:{},languages:[{key:"en",text:"English"},{key:"cn",text:"简体中文"}],thisDataIndex:-1,img:{OneDrive:d.a},show:{addDS:!1},lock:{switchDSDB:!0}}},watch:{$route:function(){this.languageInit()},language:function(){this.languageInit()}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["d"])({user:function(t){return t.user},userInfo:function(t){return t.userInfo},init_status:function(t){return t.init_status},data_index:function(t){return t.data_index},data_path:function(t){return t.data_path},dbList:function(t){return t.dbList},language:function(t){return t.language},theme:function(t){return t.theme}})),Object(s["b"])(["local","cur_db"])),{},{v:function(){return this},thisDBList:function(){var t=this,e=this.data_path,a=[];return e.forEach((function(n,i){a.push({key:i,name:e[i],path:e[i],index:i,choosen:i===t.data_index,disabled:function(){return 500===n.status||!t.lock.switchDSDB}})})),a},SourceIndexDisabled:function(){var t=this;return function(e){return!t.dbList[e]||(t.data_path[e]!==t.dbList[e].key||!t.dbList[e].init)}}}),mounted:function(){this.languageInit()},methods:Object(r["a"])(Object(r["a"])({},Object(s["c"])({reviseConfig:"reviseConfig",reviseDS:"reviseDS",reviseData:"reviseData",toggleTheme:"toggleTheme",syncDS:"syncDS",saveLocalStorage:"saveLocalStorage",getLocalStorage:"getLocalStorage",cleanLocalStorage:"cleanLocalStorage"})),{},{languageInit:function(){var t=this;this.cur_language=this.languages.find((function(e){return e.key===t.language}))},chooseLanguage:function(t){this.reviseConfig({v:this,language:t.key})},switchDSDB:function(t){var e=this.data_path.indexOf(t.item.path);this.SourceIndexDisabled(e)||(this.lock.switchDSDB=!1,this.reviseConfig({v:this,data_index:e}),this.lock.switchDSDB=!0)},removeDS:function(t){var e=this;this.$infoBox(this.local("Are you sure to remove this data source?"),{status:"error",title:this.local("Remove Data Source"),confirmTitle:this.local("Confirm"),cancelTitle:this.local("Cancel"),theme:this.theme,confirm:function(){var a=t.path,n=e.data_path.indexOf(a);e.data_path.splice(n,1)},cancel:function(){}})},login:function(){window.location.reload()},logout:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.user.logout();case 2:t.user.getActiveAccount().then((function(e){t.cleanLocalStorage(),console.log(e)}));case 3:case"end":return e.stop()}}),e)})))()}})},_=S,C=(a("98ec"),Object(w["a"])(_,n,i,!1,null,null,null));e["default"]=C.exports},"6ac7":function(t,e,a){},"98ec":function(t,e,a){"use strict";a("6ac7")},b53b:function(t,e,a){"use strict";a("19e0")}}]);
//# sourceMappingURL=chunk-63606207.4e25cbf3.js.map