(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8d8d83e"],{2021:function(t,e,a){"use strict";a("fde2")},"54e6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ikfb-templates-container",class:[{dark:"dark"===t.theme}]},[e("div",{staticClass:"s-row"},[e("p",{staticClass:"s-title"},[t._v(t._s(t.local("Templates")))])]),e("div",{staticClass:"m-templates-block"},[e("div",{staticClass:"row between"},[e("fv-text-box",{staticStyle:{"box-shadow":"0px 3px 8px rgba(0, 0, 0, 0.1)"},attrs:{placeholder:t.local("Filtering from current content"),theme:t.theme,background:"dark"===t.theme?"rgba(75, 75, 75, 1)":"rgba(245, 245, 245, 1)",icon:"Filter",borderWidth:"2",revealBorder:!0},model:{value:t.currentSearch,callback:function(e){t.currentSearch=e},expression:"currentSearch"}})],1),e("div",{staticClass:"row command-bar"},[e("fv-command-bar",{staticStyle:{flex:"1"},attrs:{options:t.cmd,theme:t.theme,background:"dark"===t.theme?"transparent":"rgba(245, 245, 245, 1)"}})],1),e("div",{staticClass:"row main-table"},[e("template-grid",{attrs:{value:t.templates,filter:t.currentSearch},on:{rightclick:function(e){t.currentItem=e},"choose-items":function(e){t.currentChoosen=e},"item-click":function(e){return t.openEditor(e)}},scopedSlots:t._u([{key:"menu",fn:function(){return[e("div",[e("span",{on:{click:function(e){t.show.rename=!0}}},[e("i",{staticClass:"ms-Icon ms-Icon--Rename",staticStyle:{color:"rgba(0, 153, 204, 1)"}}),e("p",[t._v(t._s(t.local("Rename Template")))])]),e("span",{on:{click:t.deleteTemplate}},[e("i",{staticClass:"ms-Icon ms-Icon--Delete",staticStyle:{color:"rgba(173, 38, 45, 1)"}}),e("p",[t._v(t._s(t.local("Delete Template")))])])])]},proxy:!0}])})],1)]),e("add-template",{attrs:{show:t.show.add},on:{"update:show":function(e){return t.$set(t.show,"add",e)}}}),e("rename-template",{attrs:{value:t.currentItem,show:t.show.rename},on:{"update:show":function(e){return t.$set(t.show,"rename",e)}}})],1)},i=[],o=function(){var t=this,e=t._self._c;return e("float-window-base",{attrs:{title:t.local("Add Template"),theme:t.theme},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"w-p-block"},[e("p",{staticClass:"w-title"},[t._v(t._s(t.local("Template Name")))]),e("fv-text-box",{attrs:{placeholder:t.local("Input template name..."),theme:t.theme},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]},proxy:!0},{key:"control",fn:function(){return[e("fv-button",{attrs:{theme:"dark",background:"rgba(0, 153, 204, 1)",disabled:""===t.name||!t.cur_db},on:{click:t.add}},[t._v(" "+t._s(t.local("Confirm")))]),e("fv-button",{attrs:{theme:t.theme},on:{click:function(e){t.thisShow=!1}}},[t._v(t._s(t.local("Cancel")))])]},proxy:!0}]),model:{value:t.thisShow,callback:function(e){t.thisShow=e},expression:"thisShow"}})},n=[],l=a("4c9f"),r=a("bb93"),c=a("bcbe"),h=a("d048"),d={components:{floatWindowBase:l["a"]},props:{show:{default:!1}},data(){return{thisShow:this.show,name:""}},watch:{show(t){this.thisShow=t},thisShow(t){this.$emit("update:show",t),this.name=""}},computed:{...Object(c["d"])({root:t=>t.root,data_index:t=>t.data_index,data_path:t=>t.data_path,templates:t=>t.data_structure.templates,theme:t=>t.theme}),...Object(c["b"])(["local","cur_db"]),v(){return this}},methods:{...Object(c["c"])({reviseDS:"reviseDS"}),async add(){if(!this.cur_db||""===this.name)return;let t=JSON.parse(JSON.stringify(r["f"]));t.id=this.$Guid(),t.name=this.name,t.emoji="ðŸ“‘",t.createDate=this.$SDate.DateToString(new Date),this.templates.push(t),this.reviseDS({$index:this.data_index,templates:this.templates}),await this.root.clone().path(`root/templates/${t.id}.json`).uploadAsync({file:new File([],t.id+".json",{type:"application/json"}),conflict:h["ConflictBehavior"].Fail}),this.thisShow=!1}}},m=d,u=a("8e3e"),p=Object(u["a"])(m,o,n,!1,null,null,null),f=p.exports,b=function(){var t=this,e=t._self._c;return e("float-window-base",{attrs:{title:t.local("Rename Template"),theme:t.theme},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"w-p-block"},[e("p",{staticClass:"w-title"},[t._v(t._s(t.local("Template Name")))]),e("fv-text-box",{attrs:{placeholder:t.local("Input template name..."),theme:t.theme},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.rename.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]},proxy:!0},{key:"control",fn:function(){return[e("fv-button",{attrs:{theme:"dark",background:"rgba(0, 153, 204, 1)",disabled:!t.value||""===t.name||!t.cur_db},on:{click:t.rename}},[t._v(t._s(t.local("Confirm")))]),e("fv-button",{attrs:{theme:t.theme},on:{click:function(e){t.thisShow=!1}}},[t._v(t._s(t.local("Cancel")))])]},proxy:!0}]),model:{value:t.thisShow,callback:function(e){t.thisShow=e},expression:"thisShow"}})},w=[],v={components:{floatWindowBase:l["a"]},props:{value:{default:null},show:{default:!1}},data(){return{thisShow:this.show,name:""}},watch:{show(t){this.thisShow=t},thisShow(t){this.$emit("update:show",t),this.value.name?this.name=this.value.name:this.name=""}},computed:{...Object(c["d"])({data_index:t=>t.data_index,data_path:t=>t.data_path,templates:t=>t.data_structure.templates,theme:t=>t.theme}),...Object(c["b"])(["local","cur_db"]),v(){return this}},methods:{...Object(c["c"])({reviseDS:"reviseDS"}),async rename(){if(!this.cur_db||!this.value||""===this.name)return;let t=this.templates.find(t=>t.id===this.value.id);t.name=this.name,this.value.name=this.name,this.reviseDS({$index:this.data_index,templates:this.templates}),this.thisShow=!1}}},_=v,k=Object(u["a"])(_,b,w,!1,null,null,null),x=k.exports,S=a("19c1"),y={components:{addTemplate:f,renameTemplate:x,templateGrid:S["a"]},data(){return{cmd:[{name:()=>this.local("Add"),icon:"Add",iconColor:"rgba(0, 90, 158, 1)",disabled:()=>null===this.cur_db||!this.lock,func:()=>{this.show.add=!0}},{name:()=>this.local("Delete"),icon:"Delete",iconColor:"rgba(173, 38, 45, 1)",disabled:()=>0===this.currentChoosen.length||!this.lock,func:this.deleteTemplates}],head:[{content:"No.",width:120},{content:"Icon",sortName:"emoji",width:80},{content:"Name",sortName:"name",width:300},{content:"Create Date",sortName:"createDate",width:120}],currentItem:{},currentChoosen:[],currentSearch:"",show:{add:!1,rename:!1},lock:!0}},watch:{$route(){this.templatesEnsureFolder()}},computed:{...Object(c["d"])({root:t=>t.root,data_path:t=>t.data_path,data_index:t=>t.data_index,templates:t=>t.data_structure.templates,theme:t=>t.theme}),...Object(c["b"])(["local","cur_db"]),v(){return this}},mounted(){this.templatesEnsureFolder()},methods:{...Object(c["c"])({reviseDS:"reviseDS",reviseEditor:"reviseEditor",toggleEditor:"toggleEditor"}),async templatesEnsureFolder(){if(this.cur_db&&-1!=this.data_index){this.lock=!1;try{await this.root.clone("root").createListAsync({name:"templates",conflict:h["ConflictBehavior"].Fail})}catch{}this.lock=!0}},deleteTemplate(){this.currentItem.id&&this.lock&&this.$infoBox(this.local("Are you sure to delete this template?"),{status:"error",title:this.local("Delete Template"),confirmTitle:this.local("Confirm"),cancelTitle:this.local("Cancel"),theme:this.theme,confirm:async()=>{this.lock=!1;let t=this.templates.indexOf(this.templates.find(t=>t.id===this.currentItem.id));this.templates.splice(t,1),this.reviseDS({$index:this.data_index,templates:this.templates}),await this.root.path(`root/templates/${this.currentItem.id}.json`).delAsync(),this.lock=!0},cancel:()=>{}})},deleteTemplates(){this.currentChoosen&&this.lock&&this.$infoBox(this.local("Are you sure to delete these templates?"),{status:"error",title:this.local("Delete Templates"),confirmTitle:this.local("Confirm"),cancelTitle:this.local("Cancel"),theme:this.theme,confirm:async()=>{this.lock=!1;let t=JSON.parse(JSON.stringify(this.currentChoosen));for(let e of t){let t=this.templates.indexOf(this.templates.find(t=>t.id===e.id));this.templates.splice(t,1),this.reviseDS({$index:this.data_index,templates:this.templates}),await this.root.clone().path(`root/templates/${e.id}.json`).delAsync(),this.lock=!0}},cancel:()=>{}})},openEditor(t){this.reviseEditor({type:"template",item:{},target:t}),this.toggleEditor(!0)}}},C=y,g=(a("2021"),Object(u["a"])(C,s,i,!1,null,null,null));e["default"]=g.exports},fde2:function(t,e,a){}}]);
//# sourceMappingURL=chunk-c8d8d83e.4b80474d.js.map