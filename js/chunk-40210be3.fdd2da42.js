(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40210be3"],{"19e0":function(t,e,n){},"320d":function(t,e,n){t.exports=n.p+"img/OneDrive.51d2a9bb.svg"},"61c2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-container",class:[{dark:"dark"===t.theme}]},[n("div",{staticClass:"s-row"},[n("p",{staticClass:"s-title"},[t._v(t._s(t.local("Setting")))])]),n("div",{staticClass:"scroll-view"},[n("div",{staticClass:"s-item-block"},[n("fv-button",{directives:[{name:"show",rawName:"v-show",value:!t.userInfo,expression:"!userInfo"}],staticStyle:{width:"150px"},attrs:{theme:"dark","is-box-shadow":!0,background:"rgba(0, 90, 158, 1)"},on:{click:t.login}},[t._v(t._s(t.local("Login")))])],1),n("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"35px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"StorageTape",title:t.local("Source"),content:t.local("Add New Source")},scopedSlots:t._u([{key:"extension",fn:function(){return[n("fv-button",{staticStyle:{width:"150px"},attrs:{theme:t.theme,icon:"OneDriveAdd","is-box-shadow":!0},on:{click:function(e){t.show.addDS=!0}}},[t._v(t._s(t.local("Add New Source")))])]},proxy:!0}])}),n("div",{staticClass:"s-item-block"},[n("fv-list-view",{staticStyle:{width:"100%",height:"auto","margin-top":"15px"},attrs:{value:t.thisDBList,theme:t.theme},on:{chooseItem:function(e){return t.switchDSDB(e)}},scopedSlots:t._u([{key:"listItem",fn:function(e){return[n("div",{staticClass:"list-view-item",class:[{choosen:t.data_index===e.index,disabled:t.SourceIndexDisabled(e.index)}]},[n("img",{staticClass:"icon-img",attrs:{draggable:"false",src:t.img.OneDrive,alt:""}}),n("p",{staticClass:"item-name"},[t._v(t._s(e.item.name))]),n("fv-button",{staticClass:"control-btn",attrs:{theme:t.theme,title:t.local("Unlink this source")},on:{click:function(n){return t.removeDS(e.item)}}},[n("i",{staticClass:"ms-Icon ms-Icon--RemoveLink"})])],1)]}}])})],1),n("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"15px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"Color",title:t.local("Theme"),content:"light"===t.theme?""+t.local("Light"):""+t.local("Dark")},scopedSlots:t._u([{key:"extension",fn:function(){return[n("fv-button",{staticStyle:{width:"40px",height:"40px"},attrs:{theme:t.theme,fontSize:"16",borderRadius:"50","is-box-shadow":!0,title:"light"===t.theme?""+t.local("Switch to the dark theme"):""+t.local("Switch to the light theme")},on:{click:function(e){return t.toggleTheme(t.v)}}},[n("i",{staticClass:"ms-Icon",class:["ms-Icon--"+("light"===t.theme?"Sunny":"ClearNight")]})])]},proxy:!0}])}),n("fv-Collapse",{staticStyle:{width:"calc(100% - 15px)","max-width":"1280px","margin-top":"3px"},attrs:{disabledCollapse:!0,theme:t.theme,icon:"LocaleLanguage",title:t.local("Language"),content:t.local("Choose A Language")},scopedSlots:t._u([{key:"extension",fn:function(){return[n("fv-Combobox",{staticStyle:{width:"120px"},attrs:{theme:t.theme,options:t.languages,placeholder:t.local("Choose A Language"),background:"dark"===t.theme?"rgba(36, 36, 36, 1)":""},on:{"choose-item":t.chooseLanguage},model:{value:t.cur_language,callback:function(e){t.cur_language=e},expression:"cur_language"}})]},proxy:!0}])}),n("div",{staticClass:"s-item-block"},[n("p",{staticClass:"s-item-title"},[t._v(t._s(t.local("Logout")))]),n("fv-button",{staticStyle:{width:"150px"},attrs:{theme:"dark","is-box-shadow":!0,background:"rgba(0, 90, 158, 1)"},on:{click:t.logout}},[t._v(t._s(t.local("Logout")))])],1)],1),n("add-ds",{attrs:{show:t.show.addDS,theme:t.theme},on:{"update:show":function(e){return t.$set(t.show,"addDS",e)}}})],1)},i=[],o=n("1da1"),s=n("5530"),r=(n("96cf"),n("d3b7"),n("159b"),n("7db0"),n("a434"),n("2f62")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("float-window-base",{attrs:{title:t.local("Init New Data Source"),theme:t.theme},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"w-p-block"},[n("p",{staticClass:"w-title"},[t._v(t._s(t.local("Data Source Name")))]),n("fv-text-box",{staticStyle:{width:"100%",height:"60px","margin-top":"15px"},attrs:{placeholder:t.local("Onedrive Path"),"font-size":18,"font-weight":"bold",underline:"","focus-border-color":"rgba(123, 139, 209, 1)","is-box-shadow":!0},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDS.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.lock.loading,expression:"lock.loading"}],staticClass:"tree-view-window"},[n("fv-TreeView",{staticStyle:{width:"100%",height:"100%"},attrs:{theme:t.theme,expandedIconPosition:"right",background:"transparent",viewStyle:{backgroundColor:"transparent"}},on:{click:t.expandItem},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"tree-view-custom-item"},[e.item.loading?n("fv-progress-ring",{staticStyle:{display:"flex","align-item":"center"},attrs:{loading:"true",r:"10",borderWidth:"2"}}):n("i",{staticClass:"ms-Icon",class:["ms-Icon--"+e.item.icon],staticStyle:{color:"rgba(255, 176, 63, 1)"}}),n("p",{staticClass:"tree-view-custom-label"},[t._v(t._s(e.item.name))])],1)]}}]),model:{value:t.treeList,callback:function(e){t.treeList=e},expression:"treeList"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.lock.loading,expression:"!lock.loading"}],staticClass:"loading-block"},[n("fv-img",{staticStyle:{width:"90px",height:"auto",margin:"15px"},attrs:{draggable:"false",src:t.img.OneDrive}}),n("fv-progress-ring",{attrs:{loading:"true",r:"20",borderWidth:"5"}})],1)],1)]},proxy:!0},{key:"control",fn:function(){return[n("fv-button",{attrs:{theme:"dark",background:"rgba(0, 153, 204, 1)",disabled:""===t.name},on:{click:t.addDS}},[t._v(t._s(t.local("Confirm")))]),n("fv-button",{attrs:{theme:t.theme},on:{click:function(e){t.thisShow=!1}}},[t._v(t._s(t.local("Cancel")))])]},proxy:!0}]),model:{value:t.thisShow,callback:function(e){t.thisShow=e},expression:"thisShow"}})},l=[],u=(n("b0c0"),n("4c9f")),h=n("320d"),d=n.n(h),g={components:{floatWindowBase:u["a"]},props:{show:{default:!1}},data:function(){return{thisShow:this.show,name:"",treeList:[],img:{OneDrive:d.a},lock:{loading:!0}}},watch:{show:function(t){this.thisShow=t},thisShow:function(t){this.$emit("update:show",t),this.name="",t&&(this.lock.loading=!0,this.getRootInfo())}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["d"])({onedrive:function(t){return t.onedrive},data_path:function(t){return t.data_path},language:function(t){return t.language},dbList:function(t){return t.dbList},theme:function(t){return t.theme}})),Object(r["b"])(["local"])),{},{v:function(){return this}}),methods:Object(s["a"])(Object(s["a"])({},Object(r["c"])({reviseConfig:"reviseConfig"})),{},{addDS:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.name){e.next=2;break}return e.abrupt("return");case 2:return t.data_path.push(t.name),e.next=5,t.reviseConfig({v:t,data_path:t.data_path});case 5:t.$emit("finished"),t.thisShow=!1;case 7:case"end":return e.stop()}}),e)})))()},getRootInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.lock.loading){e.next=2;break}return e.abrupt("return");case 2:return t.lock.loading=!1,e.next=5,t.onedrive.getMyDriveRootChildren();case 5:n=e.sent,n.value&&(a=t.onedriveChildrenFormat(n.value),t.treeList=a),t.lock.loading=!0;case 8:case"end":return e.stop()}}),e)})))()},onedriveChildrenFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;return n.forEach((function(t,a){t.folder?(n[a].icon="Folder",n[a].children=[]):n[a].icon="Document",n[a].loading=!1,n[a].finished=!1,n[a].depth=e?e.depth+1:1,n[a].parent=e,n[a].path=e?e.path+"/"+n[a].name:n[a].name})),n},expandItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.folder){n.next=2;break}return n.abrupt("return");case 2:if(!t.finished){n.next=4;break}return n.abrupt("return");case 4:return t.loading=!0,n.next=7,e.onedrive.getMyDriveItemChildren(t.id);case 7:a=n.sent,a.value&&(t.children=e.onedriveChildrenFormat(a.value,t)),t.finished=!0,t.loading=!1,e.name=t.path;case 12:case"end":return n.stop()}}),n)})))()}})},m=g,f=(n("b53b"),n("2877")),p=Object(f["a"])(m,c,l,!1,null,null,null),v=p.exports,b={components:{addDs:v},data:function(){return{cur_language:{},languages:[{key:"en",text:"English"},{key:"cn",text:"简体中文"}],thisDataIndex:-1,img:{OneDrive:d.a},show:{addDS:!1},lock:{switchDSDB:!0}}},watch:{$route:function(){this.languageInit()},language:function(){this.languageInit()}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["d"])({user:function(t){return t.user},userInfo:function(t){return t.userInfo},init_status:function(t){return t.init_status},data_index:function(t){return t.data_index},data_path:function(t){return t.data_path},dbList:function(t){return t.dbList},language:function(t){return t.language},theme:function(t){return t.theme}})),Object(r["b"])(["local","cur_db"])),{},{v:function(){return this},thisDBList:function(){var t=this,e=this.data_path,n=[];return e.forEach((function(a,i){n.push({key:i,name:e[i],path:e[i],index:i,choosen:i===t.data_index,disabled:function(){return 500===a.status||!t.lock.switchDSDB}})})),n},SourceIndexDisabled:function(){var t=this;return function(e){return!t.dbList[e]||(t.data_path[e]!==t.dbList[e].key||!t.dbList[e].init)}}}),mounted:function(){this.languageInit()},methods:Object(s["a"])(Object(s["a"])({},Object(r["c"])({reviseConfig:"reviseConfig",reviseDS:"reviseDS",reviseData:"reviseData",toggleTheme:"toggleTheme",syncDS:"syncDS"})),{},{languageInit:function(){var t=this;this.cur_language=this.languages.find((function(e){return e.key===t.language}))},chooseLanguage:function(t){this.reviseConfig({v:this,language:t.key})},switchDSDB:function(t){var e=this.data_path.indexOf(t.item.path);this.SourceIndexDisabled(e)||(this.lock.switchDSDB=!1,this.reviseConfig({v:this,data_index:e}),this.lock.switchDSDB=!0)},removeDS:function(t){var e=this;this.$infoBox(this.local("Are you sure to remove this data source?"),{status:"error",title:this.local("Remove Data Source"),confirmTitle:this.local("Confirm"),cancelTitle:this.local("Cancel"),theme:this.theme,confirm:function(){var n=t.path,a=e.data_path.indexOf(n);e.data_path.splice(a,1)},cancel:function(){}})},login:function(){window.location.reload()},logout:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.user.logout();case 2:t.user.getActiveAccount().then((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}})},w=b,x=(n("98ec"),Object(f["a"])(w,a,i,!1,null,null,null));e["default"]=x.exports},"6ac7":function(t,e,n){},"98ec":function(t,e,n){"use strict";n("6ac7")},b53b:function(t,e,n){"use strict";n("19e0")}}]);
//# sourceMappingURL=chunk-40210be3.fdd2da42.js.map